{% extends "brokerapp/base.html" %}
{% load static %}
{% block content %}
<div class="container-fluid">
  <div class="card shadow-sm border-0">
    <div class="card-body p-3">
      <div class="text-center mb-2">
        <h5 class="mb-0">All Broker Balance</h5>
        <small class="text-muted">Report generated on {{ end }}</small>
      </div>

      {% if rows %}
      <div class="table-responsive mt-3">
        <table class="table table-sm table-bordered align-middle">
          <thead class="table-light">
            <tr>
              <th>Broker</th>
              <th class="text-end">Op Dr</th>
              <th class="text-end">Op Cr</th>
              <th class="text-end">Opening</th>
              <th class="text-end">Sale</th>
              <th class="text-end">Purchase</th>
              <th class="text-end">Naame</th>
              <th class="text-end">Jama</th>
              <th class="text-end">Balance</th>
            </tr>
          </thead>
          <tbody>
            {% for r in rows %}
            <tr>
              <td>{{ r.broker.brokername|default:r.broker }}</td>
              <td class="text-end">{{ r.op_dr|floatformat:2 }}</td>
              <td class="text-end">{{ r.op_cr|floatformat:2 }}</td>
              <td class="text-end">{{ r.opening|floatformat:2 }}</td>
              <td class="text-end">{{ r.sale|floatformat:2 }}</td>
              <td class="text-end">{{ r.purchase|floatformat:2 }}</td>
              <td class="text-end">{{ r.naame|floatformat:2 }}</td>
              <td class="text-end">{{ r.jama|floatformat:2 }}</td>
              <td class="text-end">
                <span class="{% if r.balance < 0 %}text-danger{% else %}text-dark{% endif %}">
                  {{ r.balance|floatformat:2 }}
                </span>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <div class="text-center text-muted py-4">
        <em>No data available.</em>
      </div>
      {% endif %}
    </div>
  </div>
</div>

<!-- Uncomment below if you want auto print dialog -->
<!-- <script>window.print();</script> -->
{% endblock %}
